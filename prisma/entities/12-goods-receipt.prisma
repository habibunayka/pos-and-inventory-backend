/// ========== GOODS RECEIPT ==========
model GoodsReceipt {
  id             Int      @id @default(autoincrement())
  deletedAt DateTime? @map("deleted_at")
  purchaseOrderId Int     @map("purchase_order_id")
  receivedBy     Int?     @map("received_by")
  receivedAt     DateTime @default(now()) @map("received_at")
  note           String?

  purchaseOrder PurchaseOrder @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)
  receivedUser  User?         @relation("UserGoodsReceipts", fields: [receivedBy], references: [id], onDelete: SetNull)
  items         GoodsReceiptItem[]

  @@map("goods_receipts")
}

model GoodsReceiptItem {
  id                 Int     @id @default(autoincrement())
  deletedAt DateTime? @map("deleted_at")
  goodsReceiptId     Int     @map("goods_receipt_id")
  purchaseOrderItemId Int    @map("purchase_order_item_id")
  unitReceived       Decimal @db.Decimal(12, 2) @map("unit_received")
  unitDamaged        Decimal @db.Decimal(12, 2) @default(0) @map("unit_damaged")
  unitId             Int     @map("unit_id")
  remarks            String?

  goodsReceipt     GoodsReceipt     @relation(fields: [goodsReceiptId], references: [id], onDelete: Cascade)
  purchaseOrderItem PurchaseOrderItem @relation(fields: [purchaseOrderItemId], references: [id], onDelete: Restrict)
  unit              Unit              @relation(fields: [unitId], references: [id], onDelete: Restrict)

  @@map("goods_receipt_items")
}
